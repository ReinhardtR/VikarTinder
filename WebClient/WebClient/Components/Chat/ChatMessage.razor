@using System.Security.Claims
@using System.Globalization
<MudStack Class="@GetSideClass()">
    <MudPaper Class="pa-3" Style="@GetMessageStyles()">
        <MudText>@Content</MudText>
    </MudPaper>
    <MudText Typo="Typo.caption" Style="color: lightgray">
        @SentAt.ToLocalTime().ToString(CultureInfo.CurrentCulture)
    </MudText>
</MudStack>
  
@code {
    [Parameter]
    public int UserId { get; set; }

    [Parameter]
    public int AuthorId { get; set; }
      
    [Parameter]
    public string Content { get; set; }
    
    [Parameter]
    public DateTime SentAt { get; set; }

    private string GetSideClass()
    {
        return AuthorId == UserId ? "ml-auto align-end" : "mr-auto align-start";
    }
    
    private string GetMessageStyles()
    {
        const string baseStyles = "max-width: 80%; word-break: break-all;";
        string uniqueStyles = AuthorId == UserId ? "background-color: #ebebeb;" : "background-color: #ff4081; color: white;";
        return $"{baseStyles} {uniqueStyles}";
    }
}