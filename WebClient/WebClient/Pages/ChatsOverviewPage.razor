@page "/chat"
@using HttpClients.Services
@attribute [Authorize]

<PageTitle>Chat</PageTitle>

<AuthorizeView Roles="@AuthRoles.Substitute">
    <ChatsOverview />
</AuthorizeView>

<AuthorizeView Roles="@AuthRoles.Employer">
    @if (selectedGigId == null)
    {
        <GigsOverview OnGigSelected="OnGigSelected"/>
    }
    else
    {
        <MudStack AlignItems="AlignItems.Start">
            <MudButton OnClick="ResetGigId" StartIcon="@Icons.Filled.ArrowBack">Back</MudButton>
            <ChatsOverview GigId="@selectedGigId" />
        </MudStack>
    }
</AuthorizeView>

@code {
    
    private int? selectedGigId;

    private void ResetGigId()
    {
        selectedGigId = null;
        StateHasChanged();
    }
    
    private void OnGigSelected(int gigId)
    {
        selectedGigId = gigId;
        StateHasChanged();
    }

}